% The main TeX macros that relate your TeX code to your Lean code are:
%
% * `\lean` that lists the Lean declaration names corresponding to the surrounding
%   definition or statement (including namespaces).
% * `\leanok` which claims the surrounding environment is fully formalized. Here
%   an environment could be either a definition/statement or a proof.
% * `\uses` that lists LaTeX labels that are used in the surrounding environment.
%   This information is used to create the dependency graph. Here
%   an environment could be either a definition/statement or a proof, depending on
%   whether the referenced labels are necessary to state the definition/theorem
%   or only in the proof.
%
% The example below show those essential macros in action, assuming the existence of
% LaTeX labels `def:immersion`, `thm:open_ample` and `lem:open_ample_immersion` and
% assuming the existence of a Lean declaration `sphere_eversion`.
%
% ```latex
% \begin{theorem}[Smale 1958]
%   \label{thm:sphere_eversion}
%   \lean{sphere_eversion}
%   \leanok
%   \uses{def:immersion}
%   There is a homotopy of immersions of $ùïä^2$ into $‚Ñù^3$ from the inclusion map to
%   the antipodal map $a : q ‚Ü¶ -q$.
% \end{theorem}
%
% \begin{proof}
%   \leanok
%   \uses{thm:open_ample, lem:open_ample_immersion}
%   This obviously follows from what we did so far.
% \end
% ```

\chapter*{Case 2}
%\label{chap:case2}
\addcontentsline{toc}{chapter}{Case 2}

\begin{lemma}
    \label{lmm:three_dvd_gcd_of_dvd_a_of_dvd_b}
    \lean{three_dvd_gcd_of_dvd_a_of_dvd_b}
    \leanok
    %\uses{}
    Let $a, b, c \in \N$. \\
    If $3 \divides a$ and $3 \divides b$ and $a ^ 3 + b ^ 3 = c ^ 3$, then $3 \divides \gcd(\set{a, b, c})$.
\end{lemma}
\begin{proof}
    \leanok
\end{proof}

\begin{lemma}
    \label{lmm:three_dvd_gcd_of_dvd_a_of_dvd_c}
    \lean{three_dvd_gcd_of_dvd_a_of_dvd_c}
    \leanok
    %\uses{}
    Let $a, b, c \in \N$. \\
    If $3 \divides a$ and $3 \divides c$ and $a ^ 3 + b ^ 3 = c ^ 3$, then $3 \divides \gcd(\set{a, b, c})$.
\end{lemma}
\begin{proof}
    \leanok
\end{proof}

\begin{lemma}
    \label{lmm:three_dvd_gcd_of_dvd_b_of_dvd_c}
    \lean{three_dvd_gcd_of_dvd_b_of_dvd_c}
    \leanok
    %\uses{}
    Let $a, b, c \in \N$. \\
    If $3 \divides b$ and $3 \divides c$ and $a ^ 3 + b ^ 3 = c ^ 3$, then $3 \divides \gcd(\set{a, b, c})$.
\end{lemma}
\begin{proof}
    \leanok
\end{proof}

\begin{theorem}
    \label{thm:fermatLastTheoremThree_of_three_dvd_only_c}
    \lean{fermatLastTheoremThree_of_three_dvd_only_c}
    \leanok
    %\uses{}
    To prove Fermat's Last Theorem for exponent $n=3$, it suffices to prove that
    $$\forall a, b, c \in \Z, \text{ if } c \neq 0 \text{ and } 3 \notdivides a \text{ and }
    3 \notdivides b \text{ and } 3 \divides c \text{ and } \gcd(a,b)=1,
    \text{ then } a^3 + b^3 \neq c^3.$$
\end{theorem}
\begin{proof}
    \leanok
    \uses{
    %lmm:fermatLastTheoremWith_of_fermatLastTheoremWith_coprime
    thm:fermatLastTheoremThree_case_1,
    lmm:three_dvd_gcd_of_dvd_a_of_dvd_b,
    lmm:three_dvd_gcd_of_dvd_a_of_dvd_c,
    lmm:three_dvd_gcd_of_dvd_b_of_dvd_c
    }
\end{proof}

\begin{proposition}[Generalised Fermat's Last Theorem for $n=3$]
    \label{prop:FermatLastTheoremForThreeGen}
    \lean{FermatLastTheoremForThreeGen}
    \leanok
    %\uses{}
    Let $K$ be a number field. \\
    Let $\cc{O}_K$ be the ring of integers of $K$. \\
    Let $\cc{O}^\times_K$ be the group of units of $\cc{O}_K$. \\ \\
    $\forall a, b, c \in \cc{O}_K,\, \forall u \in \cc{O}^\times_K$ if $c \neq 0$
    and $\lambda \notdivides a$ and $\lambda \notdivides b$ and
    $\lambda \divides c$ and $\gcd(a,b)=1$, then $a^3 + b^3 \neq u \cdot c^3$.
\end{proposition}

\begin{lemma}
    \label{lmm:FermatLastTheoremForThree_of_FermatLastTheoremThreeGen}
    \lean{FermatLastTheoremForThree_of_FermatLastTheoremThreeGen}
    \leanok
    %\uses{}
    To prove Fermat's Last Theorem for exponent $n=3$,
    it suffices to prove \ref{prop:FermatLastTheoremForThreeGen}.
    %\ref{prop:FermatLastTheoremForThreeGen} implies Fermat's Last Theorem for exponent $n=3$.
\end{lemma}
\begin{proof}
    \leanok
    \uses{
    thm:fermatLastTheoremThree_of_three_dvd_only_c,
    % lmm:norm_lambda_prime,
    % lmm:norm_lambda,
    % lmm:lambda_dvd_three
    }
\end{proof}
